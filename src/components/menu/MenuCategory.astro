---
import MenuItem from './MenuItem.astro';
import MenuSubcategory from './MenuSubcategory.astro';

interface Props {
  category: {
    id: string;
    title: string;
    subtitle?: string;
    accentColor: string;
    subcategories?: Array<{
      name: string;
      items: Array<{
        name: string;
        description: string;
        price: number;
        image?: string;
        badge?: {
          text: string;
          color: string;
        };
      }>;
    }>;
    items?: Array<{
      name: string;
      description: string;
      price: number;
      image?: string;
      badge?: {
        text: string;
        color: string;
      };
    }>;
  };
}

const { category } = Astro.props;
---

<section id={category.id}>
    <div class="flex items-end justify-between mb-6 sm:mb-8 border-b border-border-subtle pb-3 sm:pb-4">
        <div>
            <h2 class="font-display text-2xl sm:text-3xl md:text-4xl font-bold uppercase text-white tracking-tight">
                {category.title.split(' ').length > 1 ? (
                    <>
                        {category.title.split(' ').slice(0, -1).join(' ')} <span class={`text-${category.accentColor}`}>{category.title.split(' ').slice(-1)}</span>
                    </>
                ) : (
                    <span class={`text-${category.accentColor}`}>{category.title}</span>
                )}
            </h2>
            {category.subtitle && (
                <p class="text-gray-500 text-xs sm:text-sm mt-1">{category.subtitle}</p>
            )}
        </div>
    </div>

    {category.subcategories ? (
        <div class="flex flex-col gap-8 sm:gap-12">
            {category.subcategories.map(subcategory => (
                <MenuSubcategory 
                    subcategory={subcategory}
                    accentColor={category.accentColor}
                />
            ))}
        </div>
    ) : (
        <div class="grid grid-cols-2 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-3 sm:gap-6 lg:gap-8">
            {category.items?.map(item => (
                <MenuItem 
                    item={item}
                    accentColor={category.accentColor}
                />
            ))}
        </div>
    )}
</section>
